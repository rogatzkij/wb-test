# wb-test
### Задание

Программа читает из stdin строки, содержащие URL. На каждый URL нужно отправить HTTP-запрос методом GET и посчитать кол-во вхождений строки "Go" в теле ответа. В конце работы приложение выводит на экран общее кол-во найденных строк "Go" во всех переданных URL, например:

	$ echo -e 'https://golang.org\nhttps://golang.org\nhttps://golang.org' | go run src/cmd/wb-test/main.go
	Count for https://golang.org: 9
	Count for https://golang.org: 9
	Count for https://golang.org: 9
	Total: 27

Каждый URL должен начать обрабатываться сразу после вычитывания и параллельно с вычитыванием следующего. URL должны обрабатываться параллельно, но не более k=5 одновременно. Обработчики URL не должны порождать лишних горутин, т.е. если k=1000 а обрабатываемых URL-ов нет, не должно создаваться 1000 горутин.

Нужно обойтись без глобальных переменных и использовать только стандартную библиотеку.



### Решение
В программе участвуют три типа сущностей (горутин):
 - главная горутина, задача которой объявить необходимое число вспомогательных горутин и раздать им задачи
 - горутины-воркеры, выполняющие HTTP GET и обработку полученного результата
 - горутина, анализирующая результаты работы горутин-воркеров (считает статистику, формирует выходные данные программы)

Главная горутина создает необходимые каналы для взаимодействия между горутинами и запускает анализирующую горутину.
Далее главная горутина последовательно считывает входные данные из stdin, запускает необходимое число горутин-воркеров, формирует задачу и отправляет ее в канал задач.
Запущенные воркеры берут задачу из канала, выполняют ее и отправляют в канал выполненных задач, в котором анализирующая горутина считает статистику и формирует выходные данные программы.
При достижении конца входных данных главная горутина закрывает канал задач, передавая сигнал завершения для горутин-воркеров.
Каждая горутина-воркер при завершении отправляет сигнал в специальный канал.
По-скольку главная горутина знает число запущенных горутин-воркеров, она ждет до тех пор, пока каждый воркер пришлет сигнал завершения.
Далее главная горутина дожидается завершения анализирующей горутины и завершает работу.
